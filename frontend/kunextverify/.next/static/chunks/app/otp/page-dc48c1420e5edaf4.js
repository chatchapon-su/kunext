(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[632],{1614:(e,t,r)=>{Promise.resolve().then(r.bind(r,3946))},3946:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});var s=r(5155),a=r(6046),o=r(2115),l=r(2651),d=r(8897),i=r.n(d);function n(){let e="https://kuapi.anasaki.live",t=(0,a.useRouter)(),[r,d]=(0,o.useState)(""),[n,c]=(0,o.useState)(""),[m,u]=(0,o.useState)(""),[x,g]=(0,o.useState)(!1),[h,p]=(0,o.useState)(null);(0,o.useEffect)(()=>{p(new URLSearchParams(window.location.search).get("verifystdcode"))},[]);let b=async t=>{t.preventDefault();try{await l.A.post("".concat(e,"/otpverify"),{std_code:h,std_otp:r}),g(!0),i().fire({icon:"success",title:"OTP verified successfully",confirmButtonText:"OK"})}catch(e){i().fire({title:"Error!",text:"Invalid OTP or something went wrong",icon:"error",confirmButtonText:"OK"})}},f=async r=>{if(r.preventDefault(),!n||!m||n!==m){i().fire({title:"Error!",text:"Passwords do not match or are empty",icon:"error",confirmButtonText:"OK"});return}try{await l.A.post("".concat(e,"/confirmpasswordotp"),{std_code:h,std_password:n}),i().fire({icon:"success",title:"Password reset successfully",confirmButtonText:"OK"}),t.push("https://kunext.anasaki.live/")}catch(e){i().fire({title:"Error!",text:"Something went wrong while resetting the password",icon:"error",confirmButtonText:"OK"})}};return(0,s.jsxs)("div",{className:"grid min-h-screen bg-white py-10 lg:px-8",children:[!x&&(0,s.jsx)("div",{className:"mx-auto p-5 bg-white",children:(0,s.jsx)("div",{className:"mx-auto w-full p-5 mb-5",children:(0,s.jsx)("div",{className:"w-full mx-auto max-w-lg p-4 bg-white border border-gray-200 rounded-lg shadow sm:p-6 md:p-8 dark:bg-white dark:border-gray-200",children:(0,s.jsxs)("form",{onSubmit:b,className:"space-y-6",children:[(0,s.jsx)("h5",{className:"text-xl font-medium text-gray-900",children:"กรอก OTP เพื่อยืนยัน"}),(0,s.jsxs)("h5",{className:"text-md font-medium text-gray-900",children:["รหัสนิสิตของคุณคือ ",h]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block mb-2 text-sm font-medium text-gray-900",children:"OTP"}),(0,s.jsx)("input",{type:"text",name:"otp",id:"otp",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg block w-full p-2.5",placeholder:"กรอก OTP",value:r,onChange:e=>d(e.target.value),required:!0})]}),(0,s.jsx)("button",{type:"submit",className:"w-full text-white bg-black hover:bg-gray-800 font-medium rounded-lg text-sm px-5 py-2.5",children:"ยืนยัน OTP"})]})})})}),x&&(0,s.jsx)("div",{className:"w-full mx-auto max-w-lg p-4 bg-white border border-gray-200 rounded-lg shadow sm:p-6 md:p-8 dark:bg-white dark:border-gray-200 mt-6",children:(0,s.jsxs)("form",{onSubmit:f,className:"space-y-6",children:[(0,s.jsx)("h5",{className:"text-xl font-medium text-gray-900",children:"ตั้งรหัสผ่านใหม่"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block mb-2 text-sm font-medium text-gray-900",children:"รหัสผ่าน"}),(0,s.jsx)("input",{type:"password",name:"password",id:"password",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg block w-full p-2.5",placeholder:"รหัสผ่าน",value:n,onChange:e=>c(e.target.value),required:!0})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block mb-2 text-sm font-medium text-gray-900",children:"ยืนยันรหัสผ่าน"}),(0,s.jsx)("input",{type:"password",name:"confirm_password",id:"confirm_password",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg block w-full p-2.5",placeholder:"ยืนยันรหัสผ่าน",value:m,onChange:e=>u(e.target.value),required:!0})]}),(0,s.jsx)("button",{type:"submit",className:"w-full text-white bg-black hover:bg-gray-800 font-medium rounded-lg text-sm px-5 py-2.5",children:"ตั้งรหัสผ่านใหม่"})]})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[320,238,441,517,358],()=>t(1614)),_N_E=e.O()}]);